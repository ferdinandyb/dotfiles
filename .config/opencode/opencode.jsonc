{
  "$schema": "https://opencode.ai/config.json",
  "snapshot": true,
  // Theme configuration
  "theme": "dracula",
  "autoupdate": false,
  "share": "disabled",
  "permission": {
    "bash": {
      "*": "ask",

      // --- Dangerous commands ---
      "sudo *": "deny",
      "terraform apply *": "deny",

      // --- Git (read-only allowed, destructive actions denied/ask) ---
      "git log*": "allow",
      "git status*": "allow",
      "git show*": "allow",
      "git blame *": "allow",
      "git diff*": "allow",
      "git branch*": "allow",
      "git branch -d*": "ask",
      "git branch -D*": "ask",
      "git branch -m*": "ask",
      "git branch --delete*": "ask",
      "git branch --move*": "ask",
      "git tag*": "allow",
      "git tag -d*": "ask",
      "git tag --delete*": "ask",
      "git remote*": "allow",
      "git remote add *": "ask",
      "git remote remove *": "ask",
      "git remote set-url *": "ask",
      "git stash list*": "allow",
      "git rev-parse *": "allow",
      "git ls-files*": "allow",
      "git add -A*": "deny",
      "git add --all*": "deny",
      "git add . *": "deny",
      "git push*": "deny",

      // --- Yadm (dotfiles, same as git) ---
      "yadm log*": "allow",
      "yadm status*": "allow",
      "yadm show*": "allow",
      "yadm blame *": "allow",
      "yadm diff*": "allow",
      "yadm branch*": "allow",
      "yadm branch -d*": "ask",
      "yadm branch -D*": "ask",
      "yadm branch -m*": "ask",
      "yadm branch --delete*": "ask",
      "yadm branch --move*": "ask",
      "yadm tag*": "allow",
      "yadm tag -d*": "ask",
      "yadm tag --delete*": "ask",
      "yadm remote*": "allow",
      "yadm remote add *": "ask",
      "yadm remote remove *": "ask",
      "yadm remote set-url *": "ask",
      "yadm stash list*": "allow",
      "yadm rev-parse *": "allow",
      "yadm ls-files*": "allow",
      "yadm add -A*": "deny",
      "yadm add --all*": "deny",
      "yadm add . *": "deny",
      "yadm push*": "deny",

      // --- Common CLI tools (read-only/safe) ---
      "ls*": "allow",
      "wc*": "allow",
      "head*": "allow",
      "tail*": "allow",
      "sort*": "allow",
      "uniq*": "allow",
      "awk*": "allow",
      "which *": "allow",
      "jq *": "allow",
      "jaq *": "allow",
      "fd *": "allow",
      "ug *": "allow",
      "TMPFILE=$(mktemp)": "allow",

      // --- Jira CLI (read-only) ---
      "jira issue list *": "allow",
      "jira epic list *": "allow",
      "jira issue view *": "allow",

      // --- Pants build system ---
      "pants lint *": "allow",
      "pants fmt *": "allow",
      "pants test *": "allow",

      // --- Taskagent ---
      "taskagent *": "allow",

      // --- gcli (allow by default, ask for destructive actions) ---
      "gcli ci *": "allow",
      "gcli issues *": "allow",
      "gcli issues -i * close*": "ask",
      "gcli issues -i * reopen*": "ask",
      "gcli issues -i * assign*": "ask",
      "gcli issues -i * labels*": "ask",
      "gcli issues -i * milestone*": "ask",
      "gcli issues -i * title*": "ask",
      "gcli issues -i * edit*": "ask",
      "gcli issues create*": "ask",
      "gcli pulls *": "allow",
      "gcli pulls -i * merge*": "ask",
      "gcli pulls -i * close*": "ask",
      "gcli pulls -i * reopen*": "ask",
      "gcli pulls -i * labels*": "ask",
      "gcli pulls -i * milestone*": "ask",
      "gcli pulls -i * title*": "ask",
      "gcli pulls -i * request-review*": "ask",
      "gcli pulls -i * assign*": "ask",
      "gcli pulls -i * checkout*": "ask",
      "gcli pulls -i * review*": "ask",
      "gcli pulls -i * approve*": "ask",
      "gcli pulls -i * unapprove*": "ask",
      "gcli pulls create*": "ask",

      // --- gh CLI (read-only commands) ---
      "gh status *": "allow",
      "gh issue list *": "allow",
      "gh issue status *": "allow",
      "gh issue view *": "allow",
      "gh pr list *": "allow",
      "gh pr status *": "allow",
      "gh pr view *": "allow",
      "gh pr checks *": "allow",
      "gh pr diff *": "allow",
      "gh repo list *": "allow",
      "gh repo view *": "allow",
      "gh repo gitignore list *": "allow",
      "gh repo gitignore view *": "allow",
      "gh repo license list *": "allow",
      "gh repo license view *": "allow",
      "gh run list *": "allow",
      "gh run view *": "allow",
      "gh workflow list *": "allow",
      "gh workflow view *": "allow",
    },
  },
  "keybinds": {
    "leader": "ctrl+x",
    "input_newline": "ctrl+enter",
    "editor_open": "<leader>v",
    "model_favorite_toggle": "<leader>f",
    "model_cycle_favorite": "ctrl+f",
    "model_cycle_favorite_reverse": "ctrl+shift+f",
  },
  "mcp": {
    "tmux-mcp": {
      "type": "local",
      "command": ["tmux-mcp"],
    },
    "mcp-neovim-server": {
      "type": "local",
      "command": ["mcp-neovim-server"],
      "environment": {
        "ALLOW_SHELL_COMMANDS": "false",
        "NVIM_SOCKET_PATH": "./.nvim.sock",
      },
    },
  },
  "plugin": ["@franlol/opencode-md-table-formatter@0.0.3"],
  "agent": {
    "explore": {
      "model": "anthropic/claude-sonnet-4-5",
    },
    "test-runner": {
      "model": "anthropic/claude-sonnet-4-5",
    },
    "taskagent-reader": {
      "model": "anthropic/claude-sonnet-4-5",
    },
  },
}
